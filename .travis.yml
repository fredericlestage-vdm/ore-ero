language: ruby
rvm:
- 2.6.0

jdk:
- oraclejdk8

install:
- bundle install
- pip install --user html5validator
- pip install --user yamale
- npm install
- pip install --user yamllint

script:
- bundle exec jekyll build
- htmlproofer --disable-external --allow-hash-href ./_site
- html5validator --root _site/
- yamale -s schemas/administrations.yml         _data/db/administrations
- yamale -s schemas/code_administration.yml     _data/db/code/administrations
- yamale -s schemas/code_code.yml               _data/db/code/releases
- yamale -s schemas/software_uses.yml           _data/db/software/uses
- yamale -s schemas/software_software.yml       _data/db/software/softwares
- yamale -s schemas/standard_administration.yml _data/db/standard/administrations
- yamale -s schemas/standard_standards.yml      _data/db/standard/standards
- npm run lint
- yamllint -d configYamlLint.yml _data


sudo: false
